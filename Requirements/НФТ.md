# Нефункциональные требования
## Maintainability 
* MNT-001 Должны быть организованы три линии поддержки: L1 - help-desk (возможно с чат-ботом), L2 - инженеры техподдержки (эксплуатация), L3 - участники команды разработки.
* MNT-002 У команд эксплуатации системы должен быть независимый канал связи с ЦОД-ами провайдеров.
* MNT-003 Требование к облачным провайдерам - инфраструктурное ПО и ПО для мониторинга должно предоставляться как сервис.
* MNT-004 Для всех Mission и Business Critical-сервисов должен быть разработан DRP.
* MNT-005 Для всех сервисов должны быть разработаны регламенты обслуживания.

## Security
* SEC-001 Пароли пользователей должны находиться в хранилище секретов.
* SEC-002 Запуск сервиса внутри контейнера должен быть не от привилегированного пользователя root.
* SEC-003 Управляющие интерфейсы и консоли веб-серверов или системы хранения медиа-файлов должны быть отключены или закрыты от публичного доступа средствами ApiGateway.
* SEC-004 Процессы веб-серверов должны запускаться от отдельного пользователя, а не от root.
* SEC-005 Приложения и middleware должны экспортировать события ИБ в SIEM-систему.
* SEC-006 Хранение персональных данных должно осуществляться в защищенном контуре отдельного сетевого сегмента.
* SEC-007 Доступ к вычислительным ресурсам облачных провайдеров, на которых будут расположены персданные, должен предоставляться эксклюзивно (только) сотрудникам команд компании в рамках своих ролей. 

## Usability
* USE-001 95% новых пользователей должны суметь успешно заполнить спорт-профиль и создать тренировку с первой попытки. 
* USE-002 Веб-интерфейс должен отображаться штатно на устройствах c IOS версий >= 10 и Android версий >= 8 в браузерах: Chrome, Firefox, Safari, Microsoft Edge, Яндекс Браузер 

## Availability
* AVL-001 Следующие подсистемы (согласно концептуальной схеме) должны быть отнесены к классу надежности Mission Critical с коэффициентом доступности не ниже 99.97 и показателями RTO/RPO - 120 мин/10 мин с допустимым количеством отказов не более 5 в год: подсистема каталога и продаж, подсистема собственных спорт-активностей, клиентская подсистема, хранилище персданных, ядро, хранилище секретов.
* AVL-002 Следующие подсистемы (согласно концептуальной схеме) должны быть отнесены к классу надежности Business Critical с коэффициентом доступности не ниже 99.90 и показателями RTO/RPO - 120 мин/15 мин с допустимым количеством отказов не более 10 в год: цифровой профиль, подсистема коммуникаций, социальные компоненты, групповые спорт-активности, подсистема мониторинга. 
* AVL-003 Следующие подсистемы (согласно концептуальной схеме) должны быть отнесены к классу надежности Business Operational с коэффициентом доступности не ниже 99.75 и показателями RTO/RPO - 480 мин/1440 мин с допустимым количеством отказов не более 15 в год: информационный портал, хранилище media-данных, подсистема аналитики и DWH.
* AVL-004 Все подсистемы должны иметь георезервирование.
* AVL-005 Mission Critical-подсистемы должна иметь горячее резервирование (боевой трафик проходит через резерв).
* AVL-006 Business Critical-подсистемы должна иметь теплое резервирование (резерв активен, но через него не проходит трафик).
* AVL-007 Business Operational-подсистемы должна иметь (как минимум) холодное резервирование (резерв пассивен). 

## Interoperability
* INT-001 Должна иметь легкоизменяемый интеграционный слой для взаимодействия со спорт-гаджетами и сторонними спорт-приложениями.

## Reliability
* REL-001 Основные процессы подсистем должны быть подключены к системе мониторинга, которая в случае инцидента должна направлять алерт-сообщения на почту L2 и в телеграм-канал поддержки.
* REL-002 Доступ к сервисам подсистем должен осуществляться через Service Discovery - по имени, а не напрямую. Service Discovery должен обеспечивать балансировку и проверять liveness и rediness probe сервисов.
* REL-003 Контейнеризированные сервисы должны быть развернуты в количестве реплик, отвечающем интенсивности обращений и нагрузке (минимум двух).
* REL-004 Каждый сервис должен поддерживать пробы: Liveness, Readiness, Startup Probes. Пробы не должны быть завязаны на проверку зависимых сервисов.
* REL-005 Все БД должны быть развернуты в кластерной топологии.
* REL-006 Плановый рост пользовательской аудитории в годовой перспективе: x10. Требуется сохранить установленный SLA на текущем уровне.
* REL-007 Ожидаются единовременные краткосрочные пики пользовательской активности в период проведения промо-акций и PR-компаний по продвижению. SLA не должен нарушаться.

## Domain partitioning
* DPRT-001 Должен быть выбран такой архитектурный стиль, который позволит разрабатывать максимально независимые сервисы в рамках разных доменных контекстов.

## Testability
* TST-001 В проде должны обнаруживаться не более 2 новых багов за релиз.
* TST-002 В обязательном порядке основные пользовательские интерфейсы должны быть покрыты UI-автотестами.

## Agility
* AGL-001 Время от старта аналитики фичи до ее приемки бизнес-заказчиком (Cycle Time) не должно превышать 5 недель.
* AGL-002 Время от точки принятия обязательств до поставки результата бизнес-заказчику (Customer Lead Time) не должно превышать 8 недель.
* AGL-003 Время от формирования концепции фичи до ее вывода в опытно-промышленную эксплуатацию не должно превышать 10 недель.
* AGL-004 Функциональные подсистемы должны быть максимально изолированы друг от друга, чтобы обеспечить возможность их независимого и оперативного развития.

## Performance
* PERF-001 Система на этапе MVP-1 должна обслуживать порядка 1000 активных пользователей одновременно. 
* PERF-002 Веб-сервер должен отвечать на запрос не более чем за 10мс. Одновременно допустимо до 200-250 запросов в период.
* PERF-003 Веб-сервер должен кешировать часто запрашиваемые ресурсы.
* PERF-003 Все основные веб-страницы, включая страницы каталога, должны загружаться не более чем за 2 секунды после запроса их по интернет-подключению со скоростью 100 Мбит/сек.

## Deployability
* DPL-001 В процесс CI/CD должны быть включены следующие фазы: quality gate, SCA, SAST, DAST, инсталляция в бинарный репозиторий.
* DPL-002 Команда разработки должна иметь доступ к контуру DEV. 
* DPL-003 Команда эксплуатации должна иметь доступ к контурам QA, UAT, PROD. Развертывание на указанные контуры должно выполняться автоматически при условии ручного одобрения (manual approve) со стороны команды эксплуатации.
* DPL-004 Обязательно указание реальных лимитов системных ресурсов, необходимых для старта и работы контейнеризированных сервисов.
* DPL-005 GitLab должен быть единым источник правды в отношении кодовой базы.
* DPL-006 Процесс развертывания должен быть автоматизирован средствами Gitlab.
* DPL-007 Развертывание на стенд DEV должно выполняться автоматически после одобрения (approve) MR в Master(Main) ветку и соответствующего тэгирования.

## Observability
* OBS-001 Должен быть порт Prometheus, для мониторинга приложения и сбора метрик. (Должны отдаваться основные бизнес метрики сервисов. Должны отдаваться метрики производительности приложения (скорость обработки, очереди и т.д.)).
* OBS-002 Логирование должно производиться в формате json без буферизации в стандартный вывод stdout (минимизировать кастомизацию полей, все поля должны быть строго типизированными). Формат лог-сообщений должен быть согласован с ИБ.
* OBS-003 Приложение должно публиковать информацию: "/actuator/health/liveness" and "/actuator/health/readiness".
* OBS-004 Веб-сервер должен публиковать свое состояние для подключения к системе мониторинга Zabbix.

## Others
* OTH-001 Для контейнеров приложений использовать легковесные базовые образы.
* OTH-002 После инициализации приложение не должно менять своего внутреннего состояния (должно быть stateless).
* OTH-003 Приложения должны регистрироваться в реестре сервисов и регулярно подтверждать регистрацию.
* OTH-004 Функциональные подсистемы должны быть максимально изолированы друг от друга, потому что могут быть размещены у разных облачных провайдеров и иметь разный характер нагрузки
